{% extends "plugIt/base.html" %}
{% load plugit_tags %}

{% block title %}Logos :: RadioEPG{% endblock %}

{% block menubar %}
    {% plugitInclude "menubar" %}
{% endblock %}

{% block content %}

    {% block pageheader %}
    <div class="menubar">
        <div class="sidebar-toggler visible-xs">
            <i class="ion-navicon"></i>
        </div>
        <div class="page-title">
            RadioEPG: Logos
            <small class="hidden-xs">{% block pagesubtitle %} {% endblock %}</small>
        </div>
        <div id="page-functions" class="pull-right">{% block pagefunctions %} {% endblock %}</div>
        <div id="page-search" class="pull-right">{% block pagesearch %} {% endblock %}</div>
    </div>
    {% endblock %}

	<table class="table table-striped table-hover table-condensed">
		<thead>
			<tr>
				<th>Station</th>
                <th>Logo</th>
			</tr>
		</thead>

		<tbody>
			{% for c in list %}
				<tr>
					<td>{{c.name}}</td>
					<td>
						{% if ebuio_u.ebuio_orga_admin %}
							<select style="margin-bottom: 0px;" onchange="switch_default({{c.id}}, $(this).val(), $(this));">
								<option value="0" {% if not c.default_logo_image_data %} selected{% endif %}><i>Disabled</i></option>
								{% for p in pictures %}
									<option value="{{p.id}}" {% if c.default_logo_image_data.id == p.id %}selected{% endif %}>{{p.name}}</option>
								{% endfor %}
							</select>
						{% else %}
							{{c.epg_picture_data.name|default:"<i>Disabled</i>"}}
						{% endif %}
					</td>
				</tr>
				{% if c.radioepg_enabled %}
				<tr>
					<td></td>
					<td>
						For Directory Service Discovery on you Webpage, include the following in the head section of your webpages:
						<pre>
<code class="language-html" data-lang="html">&lt;head&gt;
	&lt;link rel="radioepg"ï¿¼href="http://{{c.radioepg_service}}/radiodns/epg/XSI.xml"&gt;
&lt;/head&gt;</code></pre>
					</td>
				</tr>
				{% endif %}

			{% endfor %}
		</tbody>
	</table>

	<script type="text/javascript">
		function switch_default(id, val, elemToBlink) {
			$.ajax({
				url: '{{ebuio_baseUrl}}radioepg/logos/set/' + id + '/' + val,
				success: function() {
					elemToBlink.css('backgroundColor', 'green');
					elemToBlink.css('opacity', '0.25');
					elemToBlink.animate({ opacity: 1 }, 500, function() {
						elemToBlink.css('backgroundColor', '#ffffff');
					} );
				}
			})
		}
	</script>

	<hr style="visibility: hidden; clear: both;">

{% endblock %}

